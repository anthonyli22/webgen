
<script type="text/javascript">
  function subimages(id, level, x, y) {
    return (
      'https://api.gdc.cancer.gov/tile/' +
      id +
      '?level=' +
      level +
      '&x=' +
      x +
      '&y=' +
      y
    );
  }
function getImage(){
var x=document.getElementById("number").value;
var y=document.getElementById("number1").value;
var level=document.getElementById("number2").value;
var id = document.getElementById("ID").value;
slide1 = new Promise((resolve, reject) => {
      let image = new Image();
      image.onload = () => resolve(image);
      image.onerror = reject;
      image.crossOrigin = "anonymous";
      image.src = subimages(id, level, x, y);

      var br = document.createElement("br");
      document.body.appendChild(br);

      document.body.appendChild(document.createTextNode("Level: " + level));
      document.body.appendChild(document.createTextNode("     X: " + x));
      document.body.appendChild(document.createTextNode("     Y: " + y));
      document.body.appendChild(document.createTextNode("     ID: " + id));

      var br = document.createElement("br");
      document.body.appendChild(br);
      

      fetch(image.src)
        .then(res => {
            if (res.ok) {
                image.width = 300;
                image.height = 300;
                document.body.appendChild(image);
            }
            else{
              document.body.appendChild(document.createTextNode("Not available"));
            }
            
        })
        var br = document.createElement("br");
      document.body.appendChild(br);
    });
}
function getWholeImage()
{
  var number2=document.getElementById("number2").value;
  var id = document.getElementById("ID").value;
  let arr = [];
    for (let j = 0; j <= 9; j++) {
      for (let i = 0; i <= 9; i++) {
        
        let image = new Image();
  
        image.src = subimages(id, number2, i, j);

        fetch(image.src)
        .then(res => {
            if (res.ok) {
                image.width = 100;
                image.height = 100;
                document.body.appendChild(image);
            }
        })
      }
    }
}


function myFunction() {
  /* Get the text field */
  var copyText = "65fa0750-e967-489b-a4e3-870acdae25dd";

  /* Select the text field */
  copyText.select();
  copyText.setSelectionRange(0, 99999); /*For mobile devices*/

  /* Copy the text inside the text field */
  document.execCommand("copy");

}

</script>



<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <title>Web Genomics</title>
</head>

<div class="wrapper">
<h1>Webgen Image Retriever</h1>
<h3>Displays a tissue slide image from GDC given file ID</h3>
<p>Sample File ID's (different from Case UUID)</p>
  <li>65fa0750-e967-489b-a4e3-870acdae25dd</li>
  <li>0d7914e2-d807-4494-b5a6-410cb05f269f</li>
  <li>75f2e82a-e182-4698-b2dd-936d084d1073</li>
</br>

<form>
X:<input type="text" id="number" name="number" /><br/>
Y:<input type="text" id="number1" name="number1" /><br/>
Zoom:<input type="text" id="number2" name="number2"/><br/>
ID:<input type="text" id="ID" name="ID"/><br/>

<button type="button" class="btn btn-primary" onclick="getImage()" style="margin-bottom: 10px;">New Image</button>
<button type="button" class="btn btn-primary" onclick="getWholeImage()" style="margin-bottom: 10px;">Whole Image</button>
</form>
</div>

<style>
  .wrapper {background-color: antiquewhite; 
  width: 80%; 
  text-align: center; 
  margin: 0 auto; 
  margin-top: 20px; 
  margin-bottom: 20px;}

  #ID {width: 500px;}
  h1   {color: blue;}
  h3   {color: rgb(153, 0, 255);}
  input {margin-bottom: 10px;margin-left: 10px}
  </style>